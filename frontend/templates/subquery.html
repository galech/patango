<div style="display: flex; flex-direction: row; gap: 10px; align-items: center; margin-bottom: 40px" ng-if="::$ctrl.model">


  <div class="form-horizontal col-sm-12">

    <div class="form-group form-inline">
        <label class="pull-left col-form-label text-right">Annotate as: </label>
        <div class="col-sm-10">
          <input class="form-control" type="text" ng-model="$ctrl.subquery.name" required ng-pattern="/^(?!.*__)[A-Za-z_][A-Za-z0-9_]*$/"/> <!-- Avoid __ ;) -->
        </div>
    </div>


    <div class="form-group form-inline">
      <label class="pull-left col-form-label text-right">Model: </label>
      <div class="col-sm-10" style="display: flex; flex-direction: row; gap: 10px; align-items: center;">
            <label class="col-form-label text-right">{{ $ctrl.subquery.path }}</label>
            <label class="col-form-label text-right">Function: </label>
            <input type="text" ng-value="$ctrl.subquery.key" readonly class="form-control">
            <label ng-if="$ctrl.subquery.key !== 'exists' && $ctrl.field.nullable" class="col-form-label text-right">Default (coalesce): </label>
            <input ng-if="$ctrl.subquery.key !== 'exists' && $ctrl.field.nullable" class="form-control" type="number" ng-model="$ctrl.subquery.coalesce">
      </div>
    </div>

    <div class="form-group form-inline" ng-if="$ctrl.subquery.key !== 'exists' && $ctrl.subquery.key !== 'count'">
      <label class="pull-left col-form-label text-right">On field: </label>
      <div class="col-sm-10" style="display: flex; flex-direction: row; gap: 10px; align-items: center;">
            <select class="form-control" required ng-model="$ctrl.subquery.column"
                    ng-options="f.name as f.label.toLowerCase() for f in $ctrl.model.fields | filterNumberField ">
                <option value="" disabled selected hidden>{{::'Select column' | translate}}</option>
            </select>
            <label ng-if="$ctrl.getFieldByName($ctrl.subquery.column).nullable" class="col-form-label text-right">Default (coalesce): </label>
            <input ng-if="$ctrl.getFieldByName($ctrl.subquery.column).nullable" class="form-control" type="number" ng-model="$ctrl.subquery.column_coalesce">

      </div>
    </div>

    <div class="form-group form-inline">
      <label class="pull-left col-form-label text-right">Annotations: </label>
      <annotations class="col-sm-10" annotations="$ctrl.subquery.annotations" model="$ctrl.model"></annotations>
    </div>

    <div class="form-group form-inline">
      <label class="pull-left col-form-label text-right">Filters: </label>
      <filters class="col-sm-10" annotations="$ctrl.subquery.annotations" filters="$ctrl.subquery.filters" model="$ctrl.model"></filters>
    </div>

  </div>

</div>
